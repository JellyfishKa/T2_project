# MVP Demo Checklist — T2 AI Route Optimization

**Дата:** 27 февраля 2026
**Версия:** v1.1.0

---

## 1. Статус компонентов

| Компонент | Статус | Комментарий |
|-----------|--------|-------------|
| **Frontend (Vue 3 + TypeScript)** | ✅ Готов | SPA: Home, Dashboard, Optimize, Analytics, Schedule, Reps |
| **Backend (FastAPI + Python)** | ✅ Готов | 28 эндпоинтов реализовано |
| **PostgreSQL** | ✅ Готов | 8 таблиц, миграции, ORM-модели |
| **Redis** | ✅ Готов | Контейнер настроен для кеширования |
| **Docker Compose** | ✅ Готов | Multi-stage builds, 4 сервиса |
| **Nginx** | ✅ Готов | Проксирование API, SPA routing |
| **LLM: Qwen** | ✅ Готов | GGUF-модель, локальный запуск, по умолчанию |
| **LLM: Llama** | ✅ Готов | GGUF-модель, fallback |
| **SchedulePlanner** | ✅ Готов | Алгоритм A/B/C/D, MAX 14 ТТ/день |
| **Excel export/import** | ✅ Готов | openpyxl, 4 листа экспорт + обратный импорт |
| **CI/CD (GitHub Actions)** | ✅ Готов | 182/182 frontend + 61/61 backend тестов |

---

## 2. API-эндпоинты

### Оптимизация маршрутов

| Метод | Путь | Описание | Статус |
|-------|------|----------|--------|
| GET | `/health` | Проверка здоровья системы | ✅ |
| POST | `/api/v1/optimize` | Единый эндпоинт (Qwen→Llama→Greedy fallback) | ✅ |
| POST | `/api/v1/qwen/optimize` | Прямой вызов Qwen | ✅ |
| POST | `/api/v1/llama/optimize` | Прямой вызов Llama | ✅ |
| POST | `/api/v1/optimize/variants` | 3 варианта маршрута с pros/cons от LLM | ✅ |
| POST | `/api/v1/optimize/confirm` | Сохранение выбранного варианта | ✅ |

### Торговые точки и представители

| Метод | Путь | Описание | Статус |
|-------|------|----------|--------|
| GET | `/api/v1/locations/` | Список всех ТТ | ✅ |
| POST | `/api/v1/locations/` | Создание ТТ | ✅ |
| POST | `/api/v1/locations/upload` | Загрузка из CSV/JSON | ✅ |
| GET | `/api/v1/reps` | Список торговых представителей | ✅ |
| POST | `/api/v1/reps` | Создание ТП | ✅ |
| PATCH | `/api/v1/reps/{id}` | Обновление статуса/данных ТП | ✅ |
| DELETE | `/api/v1/reps/{id}` | Удаление ТП | ✅ |

### Расписание и визиты

| Метод | Путь | Описание | Статус |
|-------|------|----------|--------|
| POST | `/api/v1/schedule/generate` | Генерация месячного расписания | ✅ |
| GET | `/api/v1/schedule/` | Расписание на месяц (с time_in/time_out) | ✅ |
| PATCH | `/api/v1/schedule/{id}/status` | Обновление статуса визита | ✅ |
| POST | `/api/v1/force_majeure` | Регистрация форс-мажора + перераспределение | ✅ |
| GET | `/api/v1/force_majeure` | История форс-мажоров | ✅ |
| POST | `/api/v1/visits` | Создание записи о визите (time_in/time_out) | ✅ |
| GET | `/api/v1/visits/` | История визитов с фильтрами | ✅ |

### Аналитика и отчётность

| Метод | Путь | Описание | Статус |
|-------|------|----------|--------|
| GET | `/api/v1/metrics` | Метрики LLM-моделей | ✅ |
| GET | `/api/v1/insights` | Аналитика: охват ТТ, активность ТП | ✅ |
| GET | `/api/v1/routes/` | История маршрутов (пагинация) | ✅ |
| GET | `/api/v1/routes/{id}` | Детали маршрута с метриками | ✅ |
| GET | `/api/v1/export/schedule` | Экспорт расписания в Excel (4 листа) | ✅ |
| POST | `/api/v1/import/schedule` | Импорт заполненного Excel | ✅ |

> **Все 28 эндпоинтов реализованы и протестированы.**

---

## 3. UI-страницы

| Страница | Маршрут | Статус | Функциональность |
|----------|---------|--------|------------------|
| **Home** | `/` | ✅ Работает | Лендинг, навигация по платформе |
| **Dashboard** | `/dashboard` | ✅ Работает | Статистика, метрики, список маршрутов, детали |
| **Optimize** | `/optimize` | ✅ Работает | Ввод локаций, выбор модели (Qwen/Llama), 3 варианта с pros/cons |
| **Analytics** | `/analytics` | ✅ Работает | Графики, охват ТТ, активность ТП, Excel кнопки |
| **Schedule** | `/schedule` | ✅ Работает | Месячный календарь, Day modal (LLM-оптимизация, времена визитов) |
| **Reps** | `/reps` | ✅ Работает | CRUD торговых представителей, управление статусами |

---

## 4. Известные ограничения

| # | Ограничение | Workaround |
|---|-------------|------------|
| 1 | Первый запрос к LLM занимает 5-15 сек (загрузка модели) | Перед демо: выполнить «прогревочный» запрос |
| 2 | CORS по умолчанию — только localhost | При удалённом доступе обновить `allow_origins` в main.py |
| 3 | Модели малого размера (Qwen 0.5B, Llama 1B) — базовое качество | Для демо достаточно; в продакшн — масштабирование моделей |
| 4 | Excel импорт — только лист «Расписание» | Остальные листы игнорируются, errors[:20] с описанием |

---

## 5. Pre-Demo Checklist

### За день до демо

- [ ] Убедиться что сервер доступен (SSH / Tailscale)
- [ ] `git pull` — последняя версия кода
- [ ] Проверить наличие GGUF-моделей в `backend/src/models/`
- [ ] Проверить `.env` файл (DATABASE_HOST, пароли)
- [ ] `docker compose build` — пересобрать образы
- [ ] Проверить наличие данных: 250 ТТ Мордовии загружены (`POST /api/v1/locations/upload`)
- [ ] Проверить наличие торговых представителей (`GET /api/v1/reps`)

### За 30 минут до демо

- [ ] `docker compose up -d` — запустить все сервисы
- [ ] `docker compose ps` — все контейнеры в статусе "Up"
- [ ] `curl http://localhost:8000/health` — backend отвечает `{"status": "ok"}`
- [ ] Открыть `http://localhost` — фронтенд загружается
- [ ] **Прогревочный запрос Qwen:** `POST /api/v1/qwen/optimize` с тестовыми локациями
- [ ] **Прогревочный запрос Llama:** `POST /api/v1/llama/optimize` с тестовыми локациями
- [ ] Проверить Swagger UI: `http://localhost:8000/docs`
- [ ] **Сгенерировать расписание:** `POST /api/v1/schedule/generate?month=2026-02`
- [ ] Открыть `/schedule` — убедиться что Calendar отрисовывается
- [ ] **Протестировать Day modal:** кликнуть на день с визитами → открывается список ТТ
- [ ] **Протестировать Excel экспорт:** кнопка «Скачать Excel» в Analytics → файл скачивается

### Во время демо

- [ ] Держать открытым терминал с `docker compose logs -f backend`
- [ ] Иметь готовые curl-команды для fallback-демонстрации
- [ ] Swagger UI открыт в отдельной вкладке
- [ ] Фронтенд открыт на Home-странице
- [ ] Иметь заполненный Excel-шаблон для демонстрации импорта

### Сценарий демо (рекомендуемый порядок)

1. **Home** → показать навигацию и описание платформы
2. **Optimize** → создать маршрут из 5-10 ТТ, выбрать «авто», показать 3 варианта с LLM-комментариями
3. **Dashboard** → показать статистику, метрики Qwen/Llama, историю маршрутов
4. **Schedule** → открыть на текущем месяце, кликнуть на день → Day modal с временами
5. **Reps** → показать список ТП, изменить статус одного (sick)
6. **Analytics** → охват ТТ по категориям, скачать Excel → открыть 4 листа

---

## 6. Контакты для экстренных ситуаций

| Роль | Имя | Контакт |
|------|-----|---------|
| TL / PM | Сергей Маклаков | @maklakov_tkdrm |
| Backend | Роман Кижаев | [TBD] |
| Frontend | Владислав Наумкин | [TBD] |
| ML / Analytics | Дмитрий Мукасеев | [TBD] |

---

*См. также: [MVP_RELEASE_NOTES.md](MVP_RELEASE_NOTES.md) | [DEPLOYMENT_GUIDE.md](../SERVER/DEPLOYMENT_GUIDE.md) | [API_CONTRACT.md](../API_CONTRACT.md)*
